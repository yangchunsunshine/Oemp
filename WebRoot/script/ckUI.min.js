;(function($){$.fn.extend({ckCombox:function(option){var ck=$(this);ck.empty();ck.off();var tempOption={url:"testUrl",data:null,autoSel:false,defaultSel:true,requestType:"GET",dataType:"json",width:"100px",height:"30px",formatter:{root:"ckUIRoot",id:"id",value:"value",select:"select"},onSuccess:function(resultJson){},onSelect:function(obj){}};var ckOption=$.extend(true,{},tempOption,option);var root=ckOption.formatter.root;var ckId=ckOption.formatter.id;var ckValue=ckOption.formatter.value;var ckSelect=ckOption.formatter.select;ck.css("width",ckOption.width);ck.css("height",ckOption.height);var resultArray=[];$.ajax({type:ckOption.requestType,dataType:ckOption.dataType,data:ckOption.data,url:ckOption.url,success:function(result){if(root!="ckUIRoot"){result=result[root]}if(ckOption.defaultSel==true||ckOption.defaultSel=="true"){ck.append('<option value="-1" selected="selected">全部</option>')}for(var i in result){var tempId=result[i][ckId];var tempValue=result[i][ckValue];var tempJson="{"+ckId+' : "'+tempId+'" ,'+ckValue+' : "'+tempValue+'"}';resultArray.push(tempJson);if(ckOption.autoSel==true&&result[i][ckSelect]=="true"){ck.append('<option selected="selected" value='+tempId+">"+tempValue+"</option>");continue}ck.append("<option value="+tempId+">"+tempValue+"</option>")}ck.change(function(){ckOption.onSelect(ck)});if(ckOption.onSuccess){return ckOption.onSuccess(eval("(["+resultArray+"])"))}},error:function(XMLHttpRequest,errorMSG,Exception){alert("与服务器通讯出现错误!")}});return ck},jqCellMerge:function(option){var ck=$(this);var tempOption={judgeId:"id",mergeCellFild:["id","name"]};if(!option){tempOption.judgeId=ck.getGridParam("judgeId");tempOption.mergeCellFild=ck.getGridParam("mergeCellFild")}else{tempOption.judgeId=option.judgeId;tempOption.mergeCellFild=option.mergeCellFild}var ids=ck.getDataIDs();var spanNum=1;for(var i=0;i<ids.length;i=i+1){var id=ids[i];var thisRow=ck.getRowData(id);for(var j=i+1;j<ids.length;j=j+1){var nextId=ids[j];var nextRow=ck.getRowData(nextId);if(thisRow[tempOption.judgeId]==nextRow[tempOption.judgeId]){spanNum=spanNum+1;for(var fildId=0;fildId<tempOption.mergeCellFild.length;fildId=fildId+1){var fildName=tempOption.mergeCellFild[fildId];$("#row_"+id+"_"+thisRow[fildName].trim()).attr("rowspan",spanNum)}for(var fildId=0;fildId<tempOption.mergeCellFild.length;fildId=fildId+1){var fildName=tempOption.mergeCellFild[fildId];$("#row_"+nextId+"_"+nextRow[fildName].trim()).css("display","none")}continue}else{i=j-1;spanNum=1;break}}}},mustNumber:function(){$(this).keyup(function(){$(this).val($(this).val().replace(/\D/g,""))})},isEmail:function(){var mailContext=$(this).val();var reg=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!reg.test(mailContext)&&$.trim(mailContext)!=""){return false}return true},numLimit:function(min,max){$(this).keyup(function(){$(this).val($(this).val().replace(/\D/g,""));var thisVal=$(this).val();if(Number(thisVal)>Number(max)){$(this).val(max)}if(Number(thisVal)<Number(min)){$(this).val(min)}})}});$.extend({ckTrim:function(param){if(param==""||param==null||param=="null"){return""}return param.replace(/(^\s*)|(\s*$)/g,"").replace("&#160;","")},insertAttr:function(rowId,val,rawObject,cm,rdata){return'id = "row_'+rowId+"_"+$.ckTrim(val)+'"'},showMsg:function(tips,icon,func,time){if(time){layer.msg(tips,{title:"提示:",icon:icon,time:time,area:["275px","140px"],offset:"rb",shift:2},func);return}layer.msg(tips,{title:"提示:",icon:icon,time:2500,area:["275px","140px"],offset:"rb",shift:2},func)},isMobile:function(tel){var reg=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;if(reg.test(tel)){return true}return false},setCookie:function(name,value){document.cookie=name+"="+escape(value)+";"},getCookie:function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg)){return unescape(arr[2]).replace('"',"").replace('"',"")}else{return null}},delCookie:function(name){var exp=new Date();exp.setTime(exp.getTime()-1);var cval=getCookie(name);if(cval!=null){document.cookie=name+"="+cval+";expires="+exp.toGMTString()}}})})(jQuery);function balanceGoBack(b){var a=b.val();return b.val(rmoney(a))}function fmoney(c,f){var e=/^-?[1-9]\d*.?\d*$/g;if(isEmpty(c)==""||e.test(c)==false||c==0){return""}f=f>0&&f<=20?f:2;c=parseFloat((c+"").replace(/[^\d\.-]/g,"")).toFixed(f)+"";var a=c.split(".")[0].split("").reverse(),d=c.split(".")[1];t="";var b=a.length;for(i=0;i<b;i++){t+=a[i]+((i+1)%3==0&&(i+1)!=a.length?",":"")}return(t.split("").reverse().join("")+"."+d).replace("-,","-")}function rmoney(a){if(isEmpty(a)==""||a==0){return""}return parseFloat((a+"").replace(/[^\d\.-]/g,""))}function isEmpty(a){if(a==undefined||a=="undefined"||a==null||a=="null"||a==""){return""}return a}function IsNum(d,c){var b=window.event?d.keyCode:d.which;if(((b>=48)&&(b<=57))||b==8||b==0||b==45||b==46){var a=c.val();if(a.indexOf(".")!=-1&&a.substring(a.indexOf(".")).length>2){c.val(a.substring(0,a.indexOf(".")+2))}else{c.val(a)}window.event.returnValue=true}else{if(window.event){window.event.returnValue=false}else{d.preventDefault()}}};